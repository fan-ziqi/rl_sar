go2/pmtg_policy:
  model_name: "policy_1.pt"
  use_pmtg_controller: true
  num_observations: 151 # 模型最终输入维度: 133 (有效观测) + 18 (零填充)
  clip_obs: 100.0
  clip_actions_lower: [-100, -100, -100,
                       -100, -100, -100,
                       -100, -100, -100,
                       -100, -100, -100]
  clip_actions_upper: [ 100,  100,  100,
                        100,  100,  100,
                        100,  100,  100,
                        100,  100,  100]
  rl_kp: [30, 30, 30,
          30, 30, 30,
          30, 30, 30,
          30, 30, 30]
  rl_kd: [1.0,1.0,1.0,
          1.0,1.0,1.0,
          1.0, 1.0,1.0,
          1.0, 1.0,1.0]
  fixed_kp: [30,30, 30,
            30, 30, 30,
            30, 30, 30,
            30, 30, 30]
  fixed_kd: [1.0, 1.0, 1.0,
             1.0, 1.0, 1.0,
             1.0, 1.0, 1.0,
             1.0, 1.0, 1.0]
  num_of_dofs: 12
  action_scale: [0.5, 0.5, 0.5,
                 0.5, 0.5, 0.5,
                 0.5, 0.5, 0.5,
                 0.5, 0.5, 0.5]
  wheel_indices: []
  lin_vel_scale: 1.0
  ang_vel_scale: 1.0
  dof_pos_scale: 1.0
  dof_vel_scale: 0.1
  commands_scale: [1.0, 1.0, 1.0]
  torque_limits: [25, 25, 25,
                  25, 25, 25,
                  25, 25, 25,
                  25, 25, 25]
  default_dof_pos: [ 0.1000, 0.8000, -1.5000,
                    -0.1000, 0.8000, -1.5000,
                     0.1000, 1.0000, -1.5000,
                    -0.1000, 1.0000, -1.5000]
  joint_mapping: [3, 4, 5, 0, 1, 2, 9, 10, 11, 6, 7, 8] # 关键修正：使用这个映射来抵消模型学到的"拧巴"关系
  clip_actions: 3.0
  #以下是ptmg输入
  gait_type: "trot"
  base_frequency: 1.8
  duty_factor: 0.6
  max_clearance: 0.20
  body_height: 0.30
  max_horizontal_offset: 0.25
  z_updown_height_func: ["cubic_up", "cubic_down"] # 摆动腿抬起和放下的Z轴轨迹函数
  # --- 新增PMTG动作相关参数 ---
  delta_phi_dims: 4
  delta_phi_scale: [0.2, 0.2, 0.2, 0.2]
  residual_angle_scale: [0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2]
  obs_scales_orientation: 1.0
  obs_scales_cpg_phase: 1.0
# ''' **观测维度**: 133维+18维=151维
#  - commands (3) + orientation (3) + lin_vel (3) + ang_vel (3)
#  - dof_pos (12) + dof_vel (12)
#  - dof_pos_history (36) + dof_vel_history (24) + dof_target_history (24)
#  - cpg_phase_information (13) = [delta_phi(4), cos_phi(4), sin_phi(4), frequency(1)]
#**动作维度**: 16维
#  - delta_phi (4): 4条腿的CPG相位增量
#  - residual_angle (12): 12个关节的残差角度
# **控制流程**: PMTG生成基础步态 → RL输出残差修正 → 最终关节角度 = PMTG角度 + residual
#'''